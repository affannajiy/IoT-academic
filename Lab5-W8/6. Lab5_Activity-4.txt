//Activity 4

unsigned long measureWork(){
  //Example workload: sum 0..999 and 10 analogRead() calls
  volatile unsigned long sum = 0; // volatile prevents optimization removal
  
  for (int i = 0; i < 1000; i++){
    sum += i;
  }
  
  for (int k = 0; k < 10; k++) {
    sum += analogRead(A0);
  }
  
  return sum; // just to use it
}

void setup(){
  Serial.begin(9600);
}

void loop(){
  unsigned long t0 = micros();
  unsigned long out = measureWork();
  unsigned long t1 = micros();
  unsigned long dt = (unsigned long)(t1- t0);
  
  Serial.print("[micros timing] work result=");
  Serial.print(out);
  Serial.print(", took(Âµs)=");
  Serial.println(dt);
  delay(500); // just to slow down printing; timing measured uses micros()
}